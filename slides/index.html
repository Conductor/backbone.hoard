<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Backbone.Hoard - XHR Consolidation and Configurable Caching</title>

  <meta name="description" content="Stop making duplicate requests with backbone.hoard">
  <meta name="author" content="Christian Maher">

  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/black.css" id="theme">
  <link rel="stylesheet" href="css/hoard.css">

  <!-- Code syntax highlighting -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
  </script>

  <!--[if lt IE 9]>
  <script src="lib/js/html5shiv.js"></script>
  <![endif]-->
</head>

<body>

<div class="reveal">

  <!-- Any section element inside of this demo-container is displayed as a slide -->
  <div class="slides">
    <section>
      <h1>Backbone.Hoard</h1>

      <h3>XHR Consolidation and Configurable Caching for Backbone</h3>

      <p>
        <small>
          <a href="https://github.com/cmaher">Christian Maher</a> /
          <a href="http://twitter.com/christiansmaher">@christiansmaher</a>
        </small>
      </p>
    </section>

    <section>
      <h2>Slides</h2>

      <p>
        <a href="http://cmaher.github.io/backbone.hoard/slides">cmaher.github.io/backbone.hoard/slides</a>
      </p>
    </section>

    <section>
      <h2>Example</h2>
<pre><code>var MyModel = Backbone.Model.extend({
  url: function () { return '/models/' + this.id; },
  sync: new Backbone.Hoard.Control().getModelSync()
});

var model1 = new MyModel({ id: 1 });
var model2 = new MyModel({ id: 1 });
var model3 = new MyModel({ id: 1 });

Promise.all([model1.fetch(), model2.fetch()]).then(function () {
  // XHR Consolidation: model1 and model2 have the same attributes
  // Only 1 ajax request has been made
  return model3.fetch();
}).then(function () {
  // Caching: model1, model2, and model3 have the same attributes
  // Only 1 ajax request has been made
});</code></pre>
    </section>

    <section>
      <h2>But...Why?</h2>

      <ul>
        <li class="fragment">Dashboard Applications</li>
        <li class="fragment">Route-Specific Data</li>
      </ul>

      <aside class="notes">
        <ul>
          <li>Dashboards benefit from XHR Consolidation</li>
          <li>Routing benefits from caching</li>
        </ul>
      </aside>
    </section>

    <section>
      <section>
        <h2>Dashboard Applications</h2>

        <div class="demo-container">
          <div class="demo workspace">
            <div class="widget-row">
              <div class="widget widget-1">/models</div>
              <div class="widget widget-2">/models/1</div>
            </div>
            <div class="widget-row">
              <div class="widget widget-3">/models/2</div>
              <div class="widget widget-4">/models/3</div>
            </div>
          </div>
        </div>

        <aside class="notes">
          <strong>NAVIGATE DOWN</strong>
          <ul>
            <li>XHR consolidation</li>
            <li>user-controlled data === complexity</li>
            <li>fetching 4 different things</li>
          </ul>
        </aside>
      </section>

      <section>
        <h2>Dashboard Applications</h2>

        <div class="demo-container">
          <div class="demo workspace">
            <div class="widget-row">
              <div class="widget widget-1">/models</div>
              <div class="widget widget-2">/models/1</div>
            </div>
            <div class="widget-row">
              <div class="widget widget-2">/models/1</div>
              <div class="widget widget-1">/models</div>
            </div>
          </div>
        </div>

        <aside class="notes">
          <ul>
            <li>fetching 2 different things twice each</li>
          </ul>
        </aside>
      </section>

      <section>
        <h2>Dashboard Applications</h2>

        <div class="demo-container">
          <div class="demo workspace">
            <div class="widget-row">
              <div class="widget widget-1">/models</div>
              <div class="widget widget-1">/models</div>
            </div>
            <div class="widget-row">
              <div class="widget widget-1">/models</div>
              <div class="widget widget-1">/models</div>
            </div>
          </div>
        </div>

        <aside class="notes">
          <ul>
            <li>fetching the same (potentially expensive) thing again and again...</li>
          </ul>
        </aside>
      </section>
    </section>

    <section>
      <section>
        <h2>Route-Specific Data</h2>

        <div class="demo-container">
          <div class="demo routing">
            <p class="address-bar">/users</p>

            <div class="routing-app">
              <ul class="users-list">
                <li><a href="#/5">Users</a></li>
                <li class="user">
                  <img class="avatar" src="./images/cmaher-now.jpg">
                  <a href="#/5/1" class="user-link">cmaher (now)</a>
                </li>
                <li class="user">
                  <img class="avatar" src="./images/cmaher-then.jpg">
                  <a href="#/5/2" class="user-link">cmaher (then)</a>
                </li>
                <li class="user">
                  <img class="avatar" src="./images/sloth.jpg">
                  <a href="#/5/3" class="user-link">sloth</a>
                </li>
              </ul>
              <div class="users-details">
                Select a User
              </div>
            </div>
          </div>
        </div>

        <aside class="notes">
          <strong>CLICKABLE</strong>
          <ul>
            <li>Caching</li>
            <li>Each Route can require distinct data</li>
            <li>
              <p>When going to a new route (without hoard)</p>
              <ul>
                <li>Check to see if we have the data</li>
                <li>If no data: fetch and render when ready</li>
                <li>If data: render</li>
              </ul>
            </li>
            <li>
              <p>
                When going to a new route (with hoard)
              </p>
              <ul>
                <li>Fetch and render (always)</li>
              </ul>
            </li>
          </ul>
        </aside>
      </section>

      <section>
        <h2>Route-Specific Data</h2>

        <div class="demo-container">
          <div class="demo routing">
            <p class="address-bar">/users/1</p>

            <div class="routing-app">
              <ul class="users-list">
                <li><a href="#/5">Users</a></li>
                <li class="user">
                  <img class="avatar" src="./images/cmaher-now.jpg">
                  <a href="#/5/1" class="user-link">cmaher (now)</a>
                </li>
                <li class="user">
                  <img class="avatar" src="./images/cmaher-then.jpg">
                  <a href="#/5/2" class="user-link">cmaher (then)</a>
                </li>
                <li class="user">
                  <img class="avatar" src="./images/sloth.jpg">
                  <a href="#/5/3" class="user-link">sloth</a>
                </li>
              </ul>
              <div class="users-details">
                <img class="avatar" src="./images/cmaher-now.jpg">

                <p>Christian (now)</p>

                <p>Following</p>
                <ul>
                  <li><a href="#/5/3" class="user-link">Space Sloth</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h2>Route-Specific Data</h2>

        <div class="demo-container">
          <div class="demo routing">
            <p class="address-bar">/users/2</p>

            <div class="routing-app">
              <ul class="users-list">
                <li><a href="#/5">Users</a></li>
                <li class="user">
                  <img class="avatar" src="./images/cmaher-now.jpg">
                  <a href="#/5/1" class="user-link">cmaher (now)</a>
                </li>
                <li class="user">
                  <img class="avatar" src="./images/cmaher-then.jpg">
                  <a href="#/5/2" class="user-link">cmaher (then)</a>
                </li>
                <li class="user">
                  <img class="avatar" src="./images/sloth.jpg">
                  <a href="#/5/3" class="user-link">sloth</a>
                </li>
              </ul>
              <div class="users-details">
                <img class="avatar" src="./images/cmaher-then.jpg">

                <p>Christian (then)</p>

                <p>Following</p>
                <ul>
                  <li><a href="#/5/1" class="user-link">Christian (now)</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h2>Route-Specific Data</h2>

        <div class="demo-container">
          <div class="demo routing">
            <p class="address-bar">/users/3</p>

            <div class="routing-app">
              <ul class="users-list">
                <li><a href="#/5">Users</a></li>
                <li class="user">
                  <img class="avatar" src="./images/cmaher-now.jpg">
                  <a href="#/5/1" class="user-link">cmaher (now)</a>
                </li>
                <li class="user">
                  <img class="avatar" src="./images/cmaher-then.jpg">
                  <a href="#/5/2" class="user-link">cmaher (then)</a>
                </li>
                <li class="user">
                  <img class="avatar" src="./images/sloth.jpg">
                  <a href="#/5/3" class="user-link">sloth</a>
                </li>
              </ul>
              <div class="users-details">
                <img class="avatar" src="./images/sloth.jpg">

                <p>Space Sloth</p>

                <p>Following</p>
                <ul>
                  <li><a href="#/5/1" class="user-link">Christian (now)</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>
    </section>

    <section>
      <h2>Ok, but what about...</h2>

      <ul>
        <li>backbone-fetch-cache</li>
        <li>backbone.cachingSync</li>
        <li>ETags</li>
      </ul>

      <aside class="notes">
        <ul>
          <li>None of the above account for simultaneous requests (dashboard apps).</li>
          <li>Neither one provides async cache support (no indexeddb)</li>
          <li>Not as much configuration (fetch-cache supports custom keys and localStorage or no).</li>
          <li>ETags still require a trip to the server, but are the better choice for longer-term caching</li>
        </ul>
      </aside>
    </section>

    <section>
      <h2>(Future) URL Interpretation</h2>
      <pre><code>var coll = new MyCollection({ url: '/models' });
var filtered = new MyCollection({ url: '/models?filter="odd_id"' });
Promise.all([coll.fetch(), filtered.fetch()]).then(function () {
  // Only 1 ajax request has been made
  // coll has all models
  // filtered has all models with odd ids
});
      </code></pre>
    </section>

    <section>
      <h2>Can I Get Some Links?</h2>
      <ul>
        <li><a href="https://github.com/cmaher/backbone.hoard">github.com/cmaher/backbone.hoard</a></li>
        <li><a href="https://gitter.im/cmaher/backbone.hoard">gitter.im/cmaher/backbone.hoard</a></li>
        <li>npm + bower: <span class="monospace-text">backbone.hoard</span></li>
      </ul>
    </section>
  </div>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>

  // Full list of configuration options available at:
  // https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
    controls: false,
    progress: false,
    history: true,
    center: true,

    transition: 'none', // none/fade/slide/convex/concave/zoom

    // Optional reveal.js plugins
    dependencies: [
      {
        src: 'lib/js/classList.js', condition: function () {
        return !document.body.classList;
      }
      },
      {
        src: 'plugin/markdown/marked.js', condition: function () {
        return !!document.querySelector('[data-markdown]');
      }
      },
      {
        src: 'plugin/markdown/markdown.js', condition: function () {
        return !!document.querySelector('[data-markdown]');
      }
      },
      {
        src: 'plugin/highlight/highlight.js', async: true, condition: function () {
        return !!document.querySelector('pre code');
      }, callback: function () {
        hljs.initHighlightingOnLoad();
      }
      },
      { src: 'plugin/zoom-js/zoom.js', async: true },
      { src: 'plugin/notes/notes.js', async: true }
    ]
  });

</script>

</body>
</html>
